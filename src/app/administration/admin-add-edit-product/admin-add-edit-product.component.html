<div class="create-product-block">

  <p *ngIf="!productToEdit">Форма створення нового продукту</p>
  <p *ngIf="productToEdit">Форма редагування даних продукту</p>

  <div class="form-create-product" [formGroup]="formAddOrEditProduct">
    <div class="form-create-left-section">
      <div class="product-title">
             <span class="p-float-label">
                <input
                  id="product-title"
                  type="text"
                  pInputText
                  formControlName="title"
                >
                <label for="product-title">Назва продукту</label>
             </span>

        <div class="error-valid-message" *ngIf="formAddOrEditProduct.controls['title'].invalid && formAddOrEditProduct.controls['title'].touched">
          Вкажіть назву продукту від 6 до 30 символів
        </div>
      </div>

      <div class="product-description">
              <span class="p-float-label">
                <textarea
                  id="product-description"
                  rows="5" cols="30"
                  pInputTextarea
                  formControlName="description"
                ></textarea>
                <label for="product-description">Опис продукту</label>
              </span>

        <div class="error-valid-message" *ngIf="formAddOrEditProduct.controls['description'].invalid && formAddOrEditProduct.controls['description'].touched">
          Вкажіть опис продукту від 6 до 600 символів
        </div>
      </div>

      <div class="product-minPrice">
           <span class="p-float-label">
              <input
                id="product-minPrice"
                type="number"
                pInputText
                formControlName="minPrice"
              >
              <label for="product-minPrice">Мінімальна ціна</label>
           </span>

        <div class="error-valid-message" *ngIf="formAddOrEditProduct.controls['minPrice'].invalid && formAddOrEditProduct.controls['minPrice'].touched">
          Вкажіть ціну від 100 до 2000
        </div>
      </div>

      <div class="product-minWeight">
             <span class="p-float-label">
                <input
                  id="product-minWeight"
                  type="number"
                  pInputText
                  formControlName="minWeight"
                >
                <label for="product-minWeight">Мінімальна вага</label>
             </span>

        <div class="error-valid-message" *ngIf="formAddOrEditProduct.controls['minWeight'].invalid && formAddOrEditProduct.controls['minWeight'].touched">
          Вкажіть вагу від 10г. до 1500г.
        </div>
      </div>

      <div class="product-mainImg">
        <div class="product-img-block">
          <span class="p-float-label product-img-link">
                <textarea
                  id="product-mainImg"
                  rows="5" cols="30"
                  pInputTextarea
                  formControlName="imageMain"
                ></textarea>
                <label for="product-mainImg">Лінк на основне зображення</label>
              </span>
          <div class="product-img-demo">
            <img src="{{formAddOrEditProduct.controls['imageMain'].value}}" alt="demo">
          </div>
        </div>

        <div class="error-valid-message" *ngIf="formAddOrEditProduct.controls['imageMain'].invalid && formAddOrEditProduct.controls['imageMain'].touched">
          Вкажіть лінк на зображкння !
        </div>

      </div>

      <div class="product-bigImg">
        <div class="product-img-block">
          <span class="p-float-label product-img-link">
                <textarea
                  id="product-bigImg"
                  rows="5" cols="30"
                  pInputTextarea
                  formControlName="imageBig"
                ></textarea>
                <label for="product-bigImg">Лінк на детальне зображення</label>
              </span>
          <div class="product-img-demo">
            <img src="{{formAddOrEditProduct.controls['imageBig'].value}}" alt="demo">
          </div>
        </div>


        <div class="error-valid-message" *ngIf="formAddOrEditProduct.controls['imageBig'].invalid && formAddOrEditProduct.controls['imageBig'].touched">
          Вкажіть лінк на зображкння !
        </div>
      </div>

    </div>
    <div class="form-create-right-section">

      <div class="product-ingredients" formArrayName="ingredients">

        <div class="add-product-ingredients-block">
          <p>Інгридієнти :</p>
          <button
            pButton
            pRipple
            type="button"
            icon="pi pi-plus"
            class="p-button-rounded p-button-success p-button-text"
            *ngIf="showAddIngredientBtn"
            (click)="addIngredient()"
            pTooltip="додати" tooltipPosition="top"
          ></button>

        </div>

        <div class="product-ingredients-list">
          <div class="error-valid-message" *ngIf="ingredients.length < 2">
            Вкажіть мінімум два інгридієнти
          </div>
          <div class="product-ingredient" *ngFor="let ingredientForm of ingredients.controls; let i = index" >
            <div class="ingredient-form" [formGroupName]="i">
              <div class="add-ingredient" *ngIf="ingredientForm.value.name.length == 0">
                <input
                  #newIngredient
                  pInputText
                  placeholder="напишіть назву інгридієнта"
                />
                <button
                  pButton
                  pRipple
                  type="button"
                  icon="pi pi-check"
                  class="p-button-rounded p-button-outlined"
                  pTooltip="зберегти" tooltipPosition="right"
                  [disabled]="newIngredient.value.length == 0"
                  (click)="saveIngredient(i, newIngredient.value)"
                ></button>

              </div>
              <div class="ingredient" *ngIf="ingredientForm.value.name.length !== 0">
                <span >{{ingredientForm.value.name}}</span>
                <button
                  pButton
                  pRipple
                  type="button"
                  icon="pi pi-times"
                  class="p-button-rounded p-button-danger p-button-text"
                  pTooltip="видалити" tooltipPosition="top"
                  (click)="removeIngredient(i)"
                ></button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="product-params" formArrayName = "params">

        <div class="add-product-params-block">

          <div class="params-block-title">

            <p>Параметри :</p>

            <button
              pButton
              pRipple
              type="button"
              icon="pi pi-info"
              class="p-button-rounded p-button-warning p-button-outlined"
              pTooltip="при додаванні параметру враховуйте назву розміру:
              small - мала,
              medium - середня,
              big - велика"
              tooltipPosition="top"
            ></button>

            <button
              pButton
              pRipple
              type="button"
              icon="pi pi-plus"
              class="p-button-rounded p-button-success p-button-text"
              *ngIf="showAddParamBtn"
              (click)="addParam()"
              pTooltip="додати" tooltipPosition="top"
            ></button>
          </div>

          <div class="add-param-item" *ngIf="!showAddParamBtn" [formGroup]="formAddParamProduct">

                <div class="p-float-label">
                      <input
                        id="add-size-input"
                        type="text"
                        pInputText
                        formControlName = "size"
                      >
                      <label for="add-size-input">Розмір</label>

                      <span class="error-valid-message" *ngIf="formAddParamProduct.controls['size'].invalid && formAddParamProduct.controls['size'].touched">
                        Довжина від 1 до 10 символів!
                      </span>

                </div>




            <div class="p-float-label">
                      <input
                        id="add-price-input"
                        type="number"
                        pInputText
                        formControlName = "price"
                      >
                      <label for="add-price-input">Ціна</label>

                      <span class="error-valid-message" *ngIf="formAddParamProduct.controls['price'].invalid && formAddParamProduct.controls['price'].touched">
                        Ціна від 10 до 1000 !
                      </span>
            </div>

            <div class="p-float-label">
                      <input
                        id="add-weight-input"
                        type="number"
                        pInputText
                        formControlName = "weight"
                      >
                      <label for="add-weight-input">Вага</label>

                      <span class="error-valid-message" *ngIf="formAddParamProduct.controls['weight'].invalid && formAddParamProduct.controls['weight'].touched">
                        Вага від 10 до 2000 !
                      </span>
            </div>

            <div class="p-float-label">
                      <input
                        id="add-title-input"
                        type="text"
                        pInputText
                        formControlName="title"
                      >
                      <label for="add-title-input">Назва</label>

                      <span class="error-valid-message" *ngIf="formAddParamProduct.controls['title'].invalid && formAddParamProduct.controls['title'].touched">
                        Довжина від 1 до 30 символів!
                      </span>
            </div>

            <div class="add-param-control-btn">
              <button
                pButton
                pRipple
                type="button"
                label="Скасувати"
                class="p-button-raised p-button-danger p-button-text"
                (click)="canselAddParam()"
              ></button>
              <button
                pButton
                pRipple
                type="button"
                label="Додати"
                class="p-button-raised p-button-text"
                [disabled]="formAddParamProduct.invalid"
                (click)="saveParam(formAddParamProduct.value)"
              ></button>
            </div>

          </div>
        </div>
        <div class="product-params-list">

          <span class="error-valid-message" *ngIf="params.length < 1">
            Вкажіть мінімум один параметр
          </span>

          <div class="params-list-item" *ngFor="let paramForm of params.controls; let i = index">
            <div class="param-form" [formGroupName]="i">

              <div class="param-form-item">
                <label for="sizeInput" class="block">Розмір</label>
                <input id="sizeInput"
                       type="text"
                       class="p-inputtext-sm"
                       placeholder="size"
                       pInputText
                       formControlName= "size"
                />
              </div>

              <div class="param-form-item">
                <label for="priceInput" class="block">Ціна</label>
                <input id="priceInput"
                       type="text"
                       class="p-inputtext-sm"
                       placeholder="0.00"
                       pInputText
                       formControlName= "price"
                />
              </div>

              <div class="param-form-item">
                <label for="weightInput" class="block">Вага</label>
                <input id="weightInput"
                       type="text"
                       class="p-inputtext-sm"
                       placeholder="0.00"
                       pInputText
                       formControlName= "weight"
                />
              </div>

              <div class="param-form-item">
                <label for="weightInput" class="block">Назва</label>
                <input id="titleInput"
                       type="text"
                       class="p-inputtext-sm"
                       placeholder="title"
                       pInputText
                       formControlName= "title"
                />
              </div>

            </div>
          </div>
        </div>
        <!--            <div class="product-params-list">-->
        <!--              <div class="params-list-item" *ngFor="let paramControl of params.controls | keyvalue">-->
        <!--                <div class="param-header">-->
        <!--                  <span class="header-title-value">{{paramControl.key}}</span>-->
        <!--                  <button-->
        <!--                    pButton-->
        <!--                     pRipple-->
        <!--                    type="button"-->
        <!--                    icon="pi pi-plus"-->
        <!--                    class="p-button-rounded p-button-success p-button-text"-->
        <!--                    pTooltip="додати" tooltipPosition="right"-->
        <!--                    (click)="addParamProperty(paramControl.key)"-->

        <!--                  ></button>-->

        <!--                </div>-->
        <!--                <div class="param-block" formArrayName = "{{paramControl.key}}">-->
        <!--                  <div class="error-valid-message" *ngIf="getParamsProp(paramControl.key).length < 3">-->
        <!--                    Вкажіть мінімум три властивості параметру-->
        <!--                  </div>-->
        <!--                  <div *ngFor="let propForm of getParamsProp(paramControl.key).controls; let paramIndex = index">-->
        <!--                    <div [formGroupName]="paramIndex">-->

        <!--                      <div *ngFor="let prop of propForm.value | keyvalue">-->

        <!--                        <div class="show-param-property" *ngIf="prop.key && prop.value">-->
        <!--                          <div class="prop-param">-->
        <!--                            <p class="param-key">Назва : <span>{{prop.key}}</span></p>-->
        <!--                            <p class="param-key">Значення : <span>{{prop.value}}</span></p>-->
        <!--                          </div>-->
        <!--                          <button-->
        <!--                            pButton-->
        <!--                            pRipple-->
        <!--                            type="button"-->
        <!--                            icon="pi pi-times"-->
        <!--                            class="p-button-rounded p-button-danger p-button-text"-->

        <!--                          ></button>-->


        <!--                        </div>-->
        <!--                        <div class="add-param-property" *ngIf="!prop.key && !prop.value">-->
        <!--                          <input-->
        <!--                            #propType-->
        <!--                            pInputText-->
        <!--                            placeholder="напишіть тип"-->
        <!--                            value = "{{prop.key}}"-->
        <!--                          />-->
        <!--                          <input-->
        <!--                            #propValue-->
        <!--                            pInputText-->
        <!--                            placeholder="напишіть значення"-->
        <!--                            value = "{{prop.value}}"-->
        <!--                          >-->
        <!--                          <button-->
        <!--                            pButton-->
        <!--                            pRipple-->
        <!--                            type="button"-->
        <!--                            icon="pi pi-check"-->
        <!--                            class="p-button-rounded p-button-outlined"-->
        <!--                            pTooltip="зберегти" tooltipPosition="left"-->
        <!--                            (click)="saveParamProp(paramControl.key, paramIndex, propType.value, propValue.value)"-->
        <!--                          ></button>-->

        <!--                        </div>-->
        <!--                      </div>-->
        <!--                    </div>-->
        <!--                  </div>-->
        <!--                </div>-->
        <!--              </div>-->
        <!--            </div>-->
      </div>

    </div>


  </div>

  <div class="form-control-btn">
    <button
      pButton
      pRipple
      type="button"
      label="Скасувати"
      class="p-button-outlined p-button-info"
      (click)="canselAddProduct()"
    ></button>

    <button
      pButton
      pRipple
      type="button"
      label="Зберегти"
      class="p-button-outlined p-button-info"
      [disabled] = "formAddOrEditProduct.invalid"
      (click)="saveAddProduct(formAddOrEditProduct.value)"
    ></button>
  </div>

</div>
